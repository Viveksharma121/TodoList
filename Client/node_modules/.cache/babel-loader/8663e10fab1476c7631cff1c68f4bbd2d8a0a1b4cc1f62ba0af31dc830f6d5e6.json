{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Asus/Desktop/JavaScriptProject/ClonedRepo/TodoList/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Asus/Desktop/JavaScriptProject/ClonedRepo/TodoList/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Asus/Desktop/JavaScriptProject/ClonedRepo/TodoList/Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import ReactQuill from\"react-quill\";import\"react-quill/dist/quill.snow.css\";import\"./TodoPage.css\";// import jwt from \"jsonwebtoken\";\nimport jwt_decode from\"jwt-decode\";import axios from\"axios\";import{useParams}from\"react-router\";import{useNavigate}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TodoPage(){var history=useNavigate();var _useParams=useParams(),taskId=_useParams.taskId;console.log(taskId+\" needed\");var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],settitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var getToken=function getToken(){return localStorage.getItem(\"token\");};var handleTextChange=function handleTextChange(newText){setText(newText);console.log(text);};var removeHtmlTags=function removeHtmlTags(input){return input.replace(/<\\/?[^>]+(>|$)/g,\"\");};var CreateTask=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,decodedtoken,userId,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;token=getToken();console.log(token+\" this is token\");decodedtoken=jwt_decode(token);userId=decodedtoken.id;_context.next=7;return axios.post(\"https://todo-list-pl2e.vercel.app/api/tasks\",{title:removeHtmlTags(title||text.split(\" \").slice(0,3).join(\" \")),task:text,userId:userId});case 7:response=_context.sent;console.log(\"Task create \",response.data);settitle(\"\");settitle(\"\");history(\"/todo\");_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(\"error\");case 17:case\"end\":return _context.stop();}},_callee,null,[[0,14]]);}));return function CreateTask(){return _ref.apply(this,arguments);};}();var fetchTask=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var token,decodedtoken,userId,response,fetchedData,cleanTitle,cleanText;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;token=getToken();console.log(token+\" this is token\");decodedtoken=jwt_decode(token);userId=decodedtoken.id;console.log(userId);_context2.next=8;return axios.get(\"https://todo-list-pl2e.vercel.app/api/tasks/todo/\".concat(taskId),{headers:{Authorization:token}});case 8:response=_context2.sent;// if (response.data.length > 0) {\nfetchedData=response.data;cleanTitle=removeHtmlTags(fetchedData.title);cleanText=fetchedData.task;settitle(cleanTitle);handleTextChange(cleanText);// }\nconsole.log(response.title);_context2.next=20;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](0);console.log(\"error\");case 20:case\"end\":return _context2.stop();}},_callee2,null,[[0,17]]);}));return function fetchTask(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchTask();},[]);var UpdateTask=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var token,decodedtoken,userId,response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;token=getToken();console.log(token+\" this is token\");decodedtoken=jwt_decode(token);userId=decodedtoken.id;_context3.next=7;return axios.put(\"https://todo-list-pl2e.vercel.app/api/tasks/todo/\".concat(taskId,\"/edit\"),{title:title,task:text,userId:userId},{headers:{Authorization:token}});case 7:response=_context3.sent;setText(\"\");settitle(\"\");console.log(\"response\",response);history(\"/todo\");_context3.next=17;break;case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0+\" error\");case 17:case\"end\":return _context3.stop();}},_callee3,null,[[0,14]]);}));return function UpdateTask(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"todo-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"todo-title\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title\",value:title,onChange:function onChange(e){return settitle(e.target.value);},className:\"title-input1\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"todo-body\",children:/*#__PURE__*/_jsx(ReactQuill,{value:text,onChange:handleTextChange,className:\"body-input\",placeholder:\"Enter here ...\"})}),taskId?/*#__PURE__*/_jsx(\"button\",{onClick:UpdateTask,className:\"edit-btn\",children:\"Save Changes\"}):/*#__PURE__*/_jsx(\"button\",{onClick:CreateTask,className:\"save-btn\",children:\"Create\"})]});}export default TodoPage;","map":{"version":3,"names":["React","useEffect","useState","ReactQuill","jwt_decode","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","TodoPage","history","_useParams","taskId","console","log","_useState","_useState2","_slicedToArray","title","settitle","_useState3","_useState4","text","setText","getToken","localStorage","getItem","handleTextChange","newText","removeHtmlTags","input","replace","CreateTask","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","decodedtoken","userId","response","wrap","_callee$","_context","prev","next","id","post","split","slice","join","task","sent","data","t0","stop","apply","arguments","fetchTask","_ref2","_callee2","fetchedData","cleanTitle","cleanText","_callee2$","_context2","get","concat","headers","Authorization","UpdateTask","_ref3","_callee3","_callee3$","_context3","put","className","children","placeholder","value","onChange","e","target","onClick"],"sources":["C:/Users/Asus/Desktop/JavaScriptProject/ClonedRepo/TodoList/Client/src/components/TodoPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\nimport \"./TodoPage.css\";\r\n// import jwt from \"jsonwebtoken\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router\";\r\nimport { useNavigate } from \"react-router\";\r\nfunction TodoPage() {\r\n  const history = useNavigate();\r\n  const { taskId } = useParams();\r\n  console.log(taskId + \" needed\");\r\n  const [title, settitle] = useState(\"\");\r\n  const [text, setText] = useState(\"\");\r\n  const getToken = () => {\r\n    return localStorage.getItem(\"token\");\r\n  };\r\n\r\n  const handleTextChange = (newText) => {\r\n    setText(newText);\r\n    console.log(text);\r\n  };\r\n  const removeHtmlTags = (input) => {\r\n    return input.replace(/<\\/?[^>]+(>|$)/g, \"\");\r\n  };\r\n  const CreateTask = async () => {\r\n    try {\r\n      const token = getToken();\r\n      console.log(token + \" this is token\");\r\n      const decodedtoken = jwt_decode(token);\r\n      const userId = decodedtoken.id;\r\n      const response = await axios.post(\r\n        \"https://todo-list-pl2e.vercel.app/api/tasks\",\r\n        {\r\n          title: removeHtmlTags(title || text.split(\" \").slice(0, 3).join(\" \")),\r\n          task: text,\r\n          userId,\r\n        }\r\n      );\r\n      console.log(\"Task create \", response.data);\r\n      settitle(\"\");\r\n      settitle(\"\");\r\n      history(\"/todo\");\r\n    } catch (error) {\r\n      console.log(\"error\");\r\n    }\r\n  };\r\n  const fetchTask = async () => {\r\n    try {\r\n      const token = getToken();\r\n      console.log(token + \" this is token\");\r\n      const decodedtoken = jwt_decode(token);\r\n      const userId = decodedtoken.id;\r\n      console.log(userId);\r\n\r\n      const response = await axios.get(\r\n        `https://todo-list-pl2e.vercel.app/api/tasks/todo/${taskId}`,\r\n        {\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        }\r\n      );\r\n\r\n      // if (response.data.length > 0) {\r\n      const fetchedData = response.data;\r\n      const cleanTitle = removeHtmlTags(fetchedData.title);\r\n      const cleanText = fetchedData.task;\r\n      settitle(cleanTitle);\r\n      handleTextChange(cleanText);\r\n      // }\r\n\r\n      console.log(response.title);\r\n    } catch (error) {\r\n      console.log(\"error\");\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    fetchTask();\r\n  }, []);\r\n\r\n  const UpdateTask = async () => {\r\n    try {\r\n      const token = getToken();\r\n      console.log(token + \" this is token\");\r\n      const decodedtoken = jwt_decode(token);\r\n      const userId = decodedtoken.id;\r\n      const response = await axios.put(\r\n        `https://todo-list-pl2e.vercel.app/api/tasks/todo/${taskId}/edit`,\r\n        {\r\n          title,\r\n          task: text,\r\n          userId,\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        }\r\n      );\r\n      setText(\"\");\r\n      settitle(\"\");\r\n      console.log(\"response\", response);\r\n      history(\"/todo\");\r\n    } catch (error) {\r\n      console.log(error + \" error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"todo-container\">\r\n      <div className=\"todo-title\">\r\n        <input\r\n          placeholder=\"Title\"\r\n          value={title}\r\n          onChange={(e) => settitle(e.target.value)}\r\n          className=\"title-input1\"\r\n        />\r\n      </div>\r\n      <br />\r\n      <div className=\"todo-body\">\r\n        <ReactQuill\r\n          value={text}\r\n          onChange={handleTextChange}\r\n          className=\"body-input\"\r\n          placeholder=\"Enter here ...\"\r\n        />\r\n      </div>\r\n      {taskId ? (\r\n        <button onClick={UpdateTask} className=\"edit-btn\">\r\n          Save Changes\r\n        </button>\r\n      ) : (\r\n        <button onClick={CreateTask} className=\"save-btn\">\r\n          Create\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TodoPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}